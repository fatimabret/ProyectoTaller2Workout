CREATE TABLE ESTADO
(
  id_estado INT NOT NULL,
  tipo INT NOT NULL,
  descripcion VARCHAR(30) NOT NULL,
  PRIMARY KEY (id_estado)
);

CREATE TABLE USUARIO
(
  id_usuario INT NOT NULL,
  apellido VARCHAR(30) NOT NULL,
  nombre VARCHAR(30) NOT NULL,
  fecha_nac DATE NOT NULL,
  correo VARCHAR(50) NOT NULL,
  contrasena VARCHAR(150) NOT NULL,
  id_estado INT NOT NULL,
  PRIMARY KEY (id_usuario),
  FOREIGN KEY (id_estado) REFERENCES ESTADO(id_estado)
);

CREATE TABLE ALUMNO
(
  id_alumno INT NOT NULL,
  detalles VARCHAR(100) NOT NULL,
  genero VARCHAR(30) NOT NULL,
  id_usuario INT NOT NULL,
  PRIMARY KEY (id_alumno),
  FOREIGN KEY (id_usuario) REFERENCES USUARIO(id_usuario)
);

CREATE TABLE MEMBRESIA
(
  id_membresia INT NOT NULL,
  fecha_pago DATE NOT NULL,
  fecha_venc DATE NOT NULL,
  monto FLOAT NOT NULL,
  id_alumno INT NOT NULL,
  id_estado INT NOT NULL,
  PRIMARY KEY (id_membresia),
  FOREIGN KEY (id_alumno) REFERENCES ALUMNO(id_alumno),
  FOREIGN KEY (id_estado) REFERENCES ESTADO(id_estado)
);

CREATE TABLE ENTRENADOR
(
  id_entrenador INT NOT NULL,
  horario_disp DATE NOT NULL,
  detalles VARCHAR(30) NOT NULL,
  dias_disp DATE NOT NULL,
  cupo INT NOT NULL,
  id_usuario INT NOT NULL,
  PRIMARY KEY (id_entrenador),
  FOREIGN KEY (id_usuario) REFERENCES USUARIO(id_usuario)
);

CREATE TABLE EJERCICIO
(
  id_ejercicio INT NOT NULL,
  descripcion VARCHAR(30) NOT NULL,
  serie INT NOT NULL,
  repeticiones INT NOT NULL,
  descanso INT NOT NULL,
  id_entrenador INT NOT NULL,
  PRIMARY KEY (id_ejercicio),
  FOREIGN KEY (id_entrenador) REFERENCES ENTRENADOR(id_entrenador)
);

CREATE TABLE RUTINA
(
  dia VARCHAR(30) NOT NULL,
  id_alumno INT NOT NULL,
  id_ejercicio INT NOT NULL,
  id_estado INT NOT NULL,
  PRIMARY KEY (id_alumno, id_ejercicio),
  FOREIGN KEY (id_alumno) REFERENCES ALUMNO(id_alumno),
  FOREIGN KEY (id_ejercicio) REFERENCES EJERCICIO(id_ejercicio),
  FOREIGN KEY (id_estado) REFERENCES ESTADO(id_estado)
);

CREATE TABLE ROL
(
  id_rol INT NOT NULL,
  descripcion VARCHAR(30) NOT NULL,
  id_usuario INT NOT NULL,
  PRIMARY KEY (id_rol),
  FOREIGN KEY (id_usuario) REFERENCES USUARIO(id_usuario)
);

CREATE TABLE RECEPCIONISTA
(
  id_recepcionista INT NOT NULL,
  id_usuario INT NOT NULL,
  PRIMARY KEY (id_recepcionista),
  FOREIGN KEY (id_usuario) REFERENCES USUARIO(id_usuario)
);

CREATE TABLE ADMINISTRADOR
(
  id_administrador INT NOT NULL,
  id_usuario INT NOT NULL,
  PRIMARY KEY (id_administrador),
  FOREIGN KEY (id_usuario) REFERENCES USUARIO(id_usuario)
);

CREATE TABLE METODO_PAGO
(
  id_metodo_pago INT NOT NULL,
  tipo VARCHAR(30) NOT NULL,
  import FLOAT NOT NULL,
  PRIMARY KEY (id_metodo_pago)
);

CREATE TABLE PAGO
(
  id_pago INT NOT NULL,
  total FLOAT NOT NULL,
  id_metodo_pago INT NOT NULL,
  id_membresia INT NOT NULL,
  PRIMARY KEY (id_pago),
  FOREIGN KEY (id_metodo_pago) REFERENCES METODO_PAGO(id_metodo_pago),
  FOREIGN KEY (id_membresia) REFERENCES MEMBRESIA(id_membresia)
);
